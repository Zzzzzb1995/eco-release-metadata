
<!---
# Licensed to the Apache Software Foundation (ASF) under one
# or more contributor license agreements.  See the NOTICE file
# distributed with this work for additional information
# regarding copyright ownership.  The ASF licenses this file
# to you under the Apache License, Version 2.0 (the
# "License"); you may not use this file except in compliance
# with the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
-->
# Changelog

## Release 0.4.0 - 2014-04-06

### INCOMPATIBLE CHANGES:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |


### NEW FEATURES:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |


### IMPROVEMENTS:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |
| [TEZ-1000](https://issues.apache.org/jira/browse/TEZ-1000) | Add a placeholder partitioned unsorted output |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-990](https://issues.apache.org/jira/browse/TEZ-990) | Add support for a credentials file read by TezClient |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-989](https://issues.apache.org/jira/browse/TEZ-989) | Allow addition of resources to the AM for a running session |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-972](https://issues.apache.org/jira/browse/TEZ-972) | Shuffle Phase - optimize memory usage of empty partition data in DataMovementEvent |  Major | . | Rajesh Balamohan | Rajesh Balamohan |
| [TEZ-970](https://issues.apache.org/jira/browse/TEZ-970) | Consolidate Shuffle payload to have a single means of indicating absence of a partition |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-932](https://issues.apache.org/jira/browse/TEZ-932) | Add a type aware Initial memory distributor |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-910](https://issues.apache.org/jira/browse/TEZ-910) | Allow ShuffledUnorderedKVInput to work for cases other than broadcast |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-901](https://issues.apache.org/jira/browse/TEZ-901) | Improvements to Counters generated by runtime components |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-813](https://issues.apache.org/jira/browse/TEZ-813) | Remove unused imports across project |  Major | . | Jonathan Eagles | Jonathan Eagles |
| [TEZ-535](https://issues.apache.org/jira/browse/TEZ-535) | Redirect AM logs to different files when running multiple DAGs in the same AM |  Major | . | Siddharth Seth | Mohammad Kamrul Islam |


### BUG FIXES:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |
| [TEZ-991](https://issues.apache.org/jira/browse/TEZ-991) | getReader can occasionally hang on ShuffledMergedInput |  Critical | . | Siddharth Seth | Siddharth Seth |
| [TEZ-983](https://issues.apache.org/jira/browse/TEZ-983) | Support a helper function to extract required additional tokens from a file |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-981](https://issues.apache.org/jira/browse/TEZ-981) | Port MAPREDUCE-3685 |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-980](https://issues.apache.org/jira/browse/TEZ-980) | Data recovered flag file should be a namenode only OP. |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-976](https://issues.apache.org/jira/browse/TEZ-976) | WordCount example does not handle -D\<param\> args |  Major | . | Tassapol Athiapinya | Tassapol Athiapinya |
| [TEZ-973](https://issues.apache.org/jira/browse/TEZ-973) | Abort additional attempts if recovery fails. |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-971](https://issues.apache.org/jira/browse/TEZ-971) | Shuffle should report errors early |  Critical | . | Siddharth Seth | Siddharth Seth |
| [TEZ-969](https://issues.apache.org/jira/browse/TEZ-969) | Hive on Tez job gets stuck as reducers makes no progress |  Critical | . | Arpit Gupta | Siddharth Seth |
| [TEZ-968](https://issues.apache.org/jira/browse/TEZ-968) | Fix flush mechanism when max unflushed events count set to -1 |  Trivial | . | Hitesh Shah | Hitesh Shah |
| [TEZ-966](https://issues.apache.org/jira/browse/TEZ-966) | Tez AM has invalid state transition error when datanode is bad. |  Major | . | Tassapol Athiapinya | Hitesh Shah |
| [TEZ-964](https://issues.apache.org/jira/browse/TEZ-964) | Flaky test: TestAMNodeMap.testNodeSelfBlacklist |  Critical | . | Hitesh Shah | Hitesh Shah |
| [TEZ-958](https://issues.apache.org/jira/browse/TEZ-958) | Increase sleeps in TestContainerReuse to fix flaky tests |  Minor | . | Hitesh Shah | Hitesh Shah |
| [TEZ-955](https://issues.apache.org/jira/browse/TEZ-955) | Tez should close inputs after calling processor's close |  Major | . | Gunther Hagleitner | Hitesh Shah |
| [TEZ-947](https://issues.apache.org/jira/browse/TEZ-947) | Fix OrderedWordCount job progress reporting to work across AM attempts |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-944](https://issues.apache.org/jira/browse/TEZ-944) | Tez Job gets "Could not load native gpl library" Error |  Major | . | Yesha Vora | Hitesh Shah |
| [TEZ-942](https://issues.apache.org/jira/browse/TEZ-942) | Mrrsleep job with only maps fails with 'Illegal output to map' |  Trivial | . | Yesha Vora | Hitesh Shah |
| [TEZ-940](https://issues.apache.org/jira/browse/TEZ-940) | TaskSchedulerAppCallbackWrapper leaks memory via a CompletionService |  Major | . | Gopal V | Siddharth Seth |
| [TEZ-938](https://issues.apache.org/jira/browse/TEZ-938) | Shuffle Phase - Reduce number of http connections where there is large number of empty partitions |  Major | . | Rajesh Balamohan | Rajesh Balamohan |
| [TEZ-935](https://issues.apache.org/jira/browse/TEZ-935) | Fix function names for Vertex Stats |  Trivial | . | Hitesh Shah | Hitesh Shah |
| [TEZ-933](https://issues.apache.org/jira/browse/TEZ-933) | Race in getting source / destination numTasks on an Edge |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-931](https://issues.apache.org/jira/browse/TEZ-931) | DAGHistoryEvent should not be allowed to be sent to Dispatcher/EventHandlers |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-930](https://issues.apache.org/jira/browse/TEZ-930) | Provide additional aggregated task stats at the vertex level |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-928](https://issues.apache.org/jira/browse/TEZ-928) | NPE in last app attempt caused by registering for an RM unregister |  Critical | . | Siddharth Seth | Hitesh Shah |
| [TEZ-918](https://issues.apache.org/jira/browse/TEZ-918) | Shuffle can hang if there are intermittent fetch failures |  Critical | . | Siddharth Seth | Siddharth Seth |
| [TEZ-915](https://issues.apache.org/jira/browse/TEZ-915) | TaskScheduler can get hung when all headroom is used and it cannot utilize existing new containers |  Major | . | Bikas Saha | Bikas Saha |
| [TEZ-903](https://issues.apache.org/jira/browse/TEZ-903) | Make MAX\_MAPS\_AT\_ONCE configurable in ShuffleScheduler |  Minor | . | Rajesh Balamohan | Rajesh Balamohan |
| [TEZ-902](https://issues.apache.org/jira/browse/TEZ-902) | SortedMergedInput Fetcher can hang on retrying a bad input |  Major | . | Bikas Saha | Bikas Saha |
| [TEZ-898](https://issues.apache.org/jira/browse/TEZ-898) | Inner/outer join with 0 maps fail with 'All inputs are expected to ask for memory' |  Major | . | Yesha Vora | Siddharth Seth |
| [TEZ-896](https://issues.apache.org/jira/browse/TEZ-896) | AM Split generation broken on secure clusters when using mapred API |  Major | . | Deepesh Khandelwal | Siddharth Seth |
| [TEZ-894](https://issues.apache.org/jira/browse/TEZ-894) | Tez should have a way to know build manifest |  Major | . | Ashish Singh | Ashish Singh |
| [TEZ-893](https://issues.apache.org/jira/browse/TEZ-893) | Terasort gives ArrayIndexOutOfBound Exception for 'hadoop jar \<jar\> terasort' |  Minor | . | Yesha Vora | Hitesh Shah |
| [TEZ-891](https://issues.apache.org/jira/browse/TEZ-891) | TestTaskScheduler does not handle mockApp being called on different thread |  Major | . | Bikas Saha | Bikas Saha |
| [TEZ-888](https://issues.apache.org/jira/browse/TEZ-888) | TestAMNodeMap.testNodeSelfBlacklist failing intermittently |  Major | . | Bikas Saha | Bikas Saha |
| [TEZ-885](https://issues.apache.org/jira/browse/TEZ-885) | TestTaskScheduler intermittent failures |  Major | . | Bikas Saha | Bikas Saha |
| [TEZ-882](https://issues.apache.org/jira/browse/TEZ-882) | Update versions in master for next release |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-876](https://issues.apache.org/jira/browse/TEZ-876) | Fix graphviz dag generation for Hive |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-865](https://issues.apache.org/jira/browse/TEZ-865) | TezTaskContext.getDAGName() does not return DAG name |  Major | . | Bikas Saha | Tsuyoshi Ozawa |
| [TEZ-864](https://issues.apache.org/jira/browse/TEZ-864) | PipelinedSorter throws BufferOverflow exception |  Major | . | Rajesh Balamohan | Gopal V |
| [TEZ-715](https://issues.apache.org/jira/browse/TEZ-715) | Auto Reduce Parallelism can rarely trigger NPE in AM at DAGAppMaster$TaskEventDispatcher.handle(DAGAppMaster.java:1268) |  Major | . | Tassapol Athiapinya | Bikas Saha |
| [TEZ-676](https://issues.apache.org/jira/browse/TEZ-676) | Tez job fails on client side if nodemanager running AM is lost |  Major | . | Yesha Vora | Hitesh Shah |


### TESTS:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |


### SUB-TASKS:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |
| [TEZ-956](https://issues.apache.org/jira/browse/TEZ-956) | Handle zero task vertices correctly on Recovery |  Minor | . | Hitesh Shah | Hitesh Shah |
| [TEZ-949](https://issues.apache.org/jira/browse/TEZ-949) | Handle Session Tokens for Recovery |  Major | . | Siddharth Seth | Hitesh Shah |
| [TEZ-934](https://issues.apache.org/jira/browse/TEZ-934) | Tez Configuration changes for TezLocalRunner |  Major | . | Chen He | Chen He |
| [TEZ-904](https://issues.apache.org/jira/browse/TEZ-904) | Committer recovery events should be out-of-band |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-884](https://issues.apache.org/jira/browse/TEZ-884) | Add parameter checking for context related user API's |  Major | . | Tsuyoshi Ozawa | Tsuyoshi Ozawa |
| [TEZ-883](https://issues.apache.org/jira/browse/TEZ-883) | Fix unit tests to use comma separated values in tests having output verification at more than 1 tasks. |  Major | . | Tassapol Athiapinya | Tassapol Athiapinya |
| [TEZ-851](https://issues.apache.org/jira/browse/TEZ-851) | Handle failure to persist events to HDFS |  Major | . | Hitesh Shah | Hitesh Shah |
| [TEZ-847](https://issues.apache.org/jira/browse/TEZ-847) | Support basic AM recovery |  Major | . | Hitesh Shah | Hitesh Shah |


### OTHER:

| JIRA | Summary | Priority | Component | Reporter | Contributor |
|:---- |:---- | :--- |:---- |:---- |:---- |
| [TEZ-1001](https://issues.apache.org/jira/browse/TEZ-1001) | Remove jar file added by TEZ-989 |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-953](https://issues.apache.org/jira/browse/TEZ-953) | Port MAPREDUCE-5493 |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-952](https://issues.apache.org/jira/browse/TEZ-952) | Port MAPREDUCE-5209, MAPREDUCE-5251 |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-951](https://issues.apache.org/jira/browse/TEZ-951) | Port MAPREDUCE-5028 |  Major | . | Siddharth Seth | Gopal V |
| [TEZ-950](https://issues.apache.org/jira/browse/TEZ-950) | Port MAPREDUCE-5462 |  Major | . | Siddharth Seth | Gopal V |
| [TEZ-948](https://issues.apache.org/jira/browse/TEZ-948) | Log counters at the end of Task execution |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-939](https://issues.apache.org/jira/browse/TEZ-939) | Fix build break caused by changes in YARN-1824 |  Critical | . | Siddharth Seth | Siddharth Seth |
| [TEZ-936](https://issues.apache.org/jira/browse/TEZ-936) | Remove unused event types from AMSchedulerEventType |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-920](https://issues.apache.org/jira/browse/TEZ-920) | Increase defaults for number of counters, ensure AM uses this |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-911](https://issues.apache.org/jira/browse/TEZ-911) | Re-factor BroadcastShuffle related code to be more generic |  Major | . | Siddharth Seth | Siddharth Seth |
| [TEZ-879](https://issues.apache.org/jira/browse/TEZ-879) | Investigate synchronization in Inputs/Outputs .initialize() etc |  Major | . | Siddharth Seth | Siddharth Seth |


